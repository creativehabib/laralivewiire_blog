document.addEventListener("DOMContentLoaded",()=>{const r=t=>{if(!(t instanceof HTMLElement))return!0;const n=t.tagName==="CODE",e=!!t.closest("pre"),o=t.innerText.includes(`
`);return!n||e?!1:window.getComputedStyle(t).display==="inline"&&!o},i=()=>{const t=document.querySelectorAll(".ck-content pre, .ck-content code"),n=new Set;return t.forEach(e=>{const o=e.closest("pre")??e;n.add(o)}),Array.from(n).filter(e=>!r(e))},a=async t=>{if(!t)return!1;try{return await navigator.clipboard.writeText(t),!0}catch{const e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select();const o=document.execCommand("copy");return document.body.removeChild(e),o}},c=()=>{i().forEach(n=>{if(n.querySelector(".code-copy-btn"))return;n.classList.add("code-block-container");const e=document.createElement("button");e.type="button",e.className="code-copy-btn",e.innerHTML='<i class="fa-regular fa-copy"></i><span class="sr-only">কপি করুন</span>',e.addEventListener("click",async()=>{const s=n.querySelector("code")?.innerText??n.innerText;await a(s.trim())?(e.classList.add("copied"),e.innerHTML='<i class="fa-solid fa-check"></i><span class="sr-only">কপি সম্পন্ন</span>'):e.innerHTML='<i class="fa-solid fa-circle-exclamation"></i><span class="sr-only">কপি ব্যর্থ</span>',setTimeout(()=>{e.classList.remove("copied"),e.innerHTML='<i class="fa-regular fa-copy"></i><span class="sr-only">কপি করুন</span>'},1500)}),n.appendChild(e)})},d=()=>{new MutationObserver(n=>{let e=!1;n.forEach(o=>{o.addedNodes.forEach(s=>{s instanceof HTMLElement&&(s.matches?.(".ck-content pre, .ck-content code")||s.querySelector?.(".ck-content pre, .ck-content code"))&&(e=!0)})}),e&&c()}).observe(document.body,{childList:!0,subtree:!0})};c(),d(),document.addEventListener("livewire:navigated",c),window.addEventListener("post-content-loaded",c),document.addEventListener("livewire:init",()=>{window.Livewire&&typeof window.Livewire.hook=="function"&&window.Livewire.hook("message.processed",c)})});
